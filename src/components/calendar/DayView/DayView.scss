// === IMPORTS ===
@use "sass:color";
@use "../../../styles/variables" as *;

// === ANIMATIONS ===
@keyframes todayPulse {
  0%, 100% {
    box-shadow: 0 0 0 2px rgba($primary-color, 0.3), 0 0 12px rgba($primary-color, 0.4);
  }
  50% {
    box-shadow: 0 0 0 3px rgba($primary-color, 0.5), 0 0 16px rgba($primary-color, 0.6);
  }
}

// === MIXINS ===
@mixin day-base {
  width: $day-cell-size;
  height: $day-cell-size;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  margin: $day-cell-margin;
  border-radius: $radius-md;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

@mixin day-hover {
  transform: scale(1.05);
  box-shadow: $shadow-card;
}

@mixin day-special {
  border: 2px solid;
  box-shadow: 0 0 0 3px rgba($primary-color, 0.1);
}

// === DAY STYLES ===
.linear-day {
  @include day-base;
  position: relative;
  
  &.empty {
    background: transparent;
    cursor: default;
    width: $day-cell-size;
    height: $day-cell-size;
    margin: $day-cell-margin;
  }
  
  &.normal {
    background: $background-secondary;
    color: $text-primary;
    border-color: $border-light;
    
    &:hover {
      background: $background-hover;
      border-color: $border-medium;
      @include day-hover;
    }
  }
  
  &.weekend {
    background: $day-weekend;
    color: $text-white;
    border-color: rgba(255, 255, 255, 0.2);
  }
  
  &.holiday {
    background: $day-holiday;
    color: $text-white;
    border-color: rgba(255, 255, 255, 0.2);
  }
  
  &.holiday-weekend {
    background: $day-holiday-weekend;
    color: $text-white;
    border-color: rgba(255, 255, 255, 0.2);
  }
  
  &.personal-holiday {
    background: $day-personal-holiday;
    color: $text-white;
    border-color: rgba(255, 255, 255, 0.2);
    
    &:hover {
      background: $day-personal-holiday-hover;
      @include day-hover;
    }
  }

  &.has-ical-events {
    // Event indicator is now handled by the event lines below the calendar
  }
  
  &.today {
    border-color: $primary-color;
    border-width: 3px;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.3), 0 0 12px rgba($primary-color, 0.4);
    font-weight: $font-weight-bold;
    transform: scale(1.1);
    z-index: 10;
    position: relative;
    
    // Add a pulsing animation to make it more noticeable
    animation: todayPulse 2s ease-in-out infinite;
  }
  
  &.selected {
    @include day-special;
    border-color: $primary-color;
    background: $background-selected;
    color: $primary-color;
    font-weight: $font-weight-semibold;
  }

}

// === DAY CONTENT ===
.day-number {
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  line-height: 1;
}
